<wdkModel>

    <querySet name="AssemblyAttributes" queryType="attribute" excludeProjects="TrichDB">


      <defaultTestParamValues includeProjects="PlasmoDB">
         <paramValue name="source_id">PvDT.474317.tmp</paramValue>
         <paramValue name="project_id">PlasmoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="ToxoDB" minRows="0">
         <paramValue name="source_id">NcDT.426290.tmp</paramValue>
         <paramValue name="project_id">ToxoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="CryptoDB">
         <paramValue name="source_id">CpDT.322688.tmp</paramValue>
         <paramValue name="project_id">CryptoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="GiardiaDB">
         <paramValue name="source_id">GlDT.40190.tmp</paramValue>
         <paramValue name="project_id">GiardiaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="TriTrypDB">
         <paramValue name="source_id">TbDT.134383.tmp</paramValue>
         <paramValue name="project_id">TriTrypDB</paramValue>
      </defaultTestParamValues>

      <testRowCountSql>
         select count(*) from dots.assembly
      </testRowCountSql>

        <sqlQuery name="Bfmv">
        <column name="project_id" />
        <column name="source_id" />
        <column name="organism"   ignoreCase="true"/>
        <column name="formatted_organism"  sortingColumn="organism" ignoreCase="true"/>
        <column name="est_count"  />
        <column name="length" />
        <column name="a_count" />
        <column name="t_count" />
        <column name="c_count" />
        <column name="g_count" />
        <column name="other_count" />
<!--     <sql includeProjects="ToxoDB">
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(SUBSTR(aa.organism, 1,   40),'Toxoplasma','T.') AS organism,
 '<i>' || SUBSTR(aa.organism, 1, 1) || '.' ||
                  REGEXP_REPLACE(SUBSTR(aa.organism, INSTR(aa.organism, ' ')), '[[:space:]]+',
                                 chr(38) || 'nbsp;') || '</i>'
                    AS formatted_organism,
      aa.est_count, aa.length, aa.a_count, aa.t_count, aa.g_count,aa.c_count,aa.other_count
      FROM  apidb.AssemblyAttributes aa
     ]]>
    </sql>
-->
     <sql>
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(
        REPLACE(
         REPLACE(
          REPLACE(
            REPLACE(aa.organism,'Cryptosporidium','C.' ),
                                'Giardia',        'G.' ),
                                'Toxoplasma',        'T.' ),
                                'Plasmodium',        'P.' ),
                                'Trichomonas',    'T.' ) AS organism,
 '<i>' || SUBSTR(aa.organism, 1, 1) || '.' ||
                  REGEXP_REPLACE(SUBSTR(aa.organism, INSTR(aa.organism, ' ')), '[[:space:]]+',
                                 chr(38) || 'nbsp;') || '</i>'
                    AS formatted_organism,
      aa.est_count, aa.length, aa.a_count, aa.t_count, aa.g_count,aa.c_count,aa.other_count
      FROM  apidb.AssemblyAttributes aa
     ]]>
    </sql>
    </sqlQuery>


       <sqlQuery name="Sequence">
        <column name="project_id"/>
        <column name="source_id"/>
        <column name="sequence"/>
     <sql>
      <![CDATA[ 
         SELECT source_id, '@PROJECT_ID@' as project_id, sequence
         FROM   apidb.assemblySequence
     ]]>
    </sql>
 <sql includeProjects="EuPathDB">
                <![CDATA[
                SELECT ens.source_id, ens.sequence,
                       '@PROJECT_ID@' as project_id
                FROM dots.ExternalNaSequence ens, sres.SequenceOntology so
                WHERE so.term_name = 'assembly'
                  AND so.sequence_ontology_id = ens.sequence_ontology_id
                ]]>
           </sql>
    </sqlQuery>


    </querySet>

</wdkModel>
