<wdkModel>

<!-- notes

-Utility RecordClasses

-->

 <recordClassSet name="UtilityRecordClasses">
    
        <!-- UtilityRecordClasses.SiteInfo -->
        <recordClass name="SiteInfo" doNotTest="true" type="InternalState">

            <!-- primary key definition -->
            <primaryKeyAttribute name="primary_key"
                                 displayName="InternalState">
                <columnRef>source_id</columnRef>
                <columnRef>project_id</columnRef>
                <text>
                    <![CDATA[
                    $$project_id$$:$$source_id$$
                    ]]>
                </text>                
            </primaryKeyAttribute>

            <attributeQueryRef ref="UtilityQueries.CurrentInstance">
                <columnAttribute name="global_name" internal="true" />
                <columnAttribute name="version" internal="true" />
                <columnAttribute name="server_name" internal="true" />
                <columnAttribute name="server_ip" internal="true" />
                <columnAttribute name="system_date" internal="true" />
                <columnAttribute name="login" internal="true" />
                <columnAttribute name="service_name" internal="true" />
                <columnAttribute name="db_name" internal="true" />
                <columnAttribute name="db_unique_name" internal="true" />
                <columnAttribute name="instance_name" internal="true" />
                <columnAttribute name="db_domain" internal="true" />
                <columnAttribute name="client_host" internal="true" />
                <columnAttribute name="os_user" internal="true" />
            </attributeQueryRef>

            <attributeQueryRef ref="UtilityQueries.CacheState">
                <columnAttribute name="cache_count" internal="true" />
            </attributeQueryRef>
 
            <attributeQueryRef ref="UtilityQueries.ApiCommDbLink">
                <columnAttribute name="apicomm_global_name" internal="true" />
            </attributeQueryRef>

            <attributeQueryRef ref="UtilityQueries.TuningManager">
                <columnAttribute name="family_name" internal="true" />
                <columnAttribute name="last_ok" internal="true" />
                <columnAttribute name="last_updater" internal="true" />
                <columnAttribute name="outdated_since" internal="true" />
                <columnAttribute name="last_checker" internal="true" />
                <columnAttribute name="instance_nickname" internal="true" />
                <columnAttribute name="subversion_url" internal="true" />
                <columnAttribute name="notify_emails" internal="true" />
                <columnAttribute name="elapsedCheckDays" internal="true" />
                <columnAttribute name="elapsedCheckHours" internal="true" />
                <columnAttribute name="elapsedCheckMinutes" internal="true" />
                <columnAttribute name="last_check" internal="true" />
                <columnAttribute name="state" internal="true" />
            </attributeQueryRef>



            <table name="AllDbLinks" displayName="All DBLinks"
                   queryRef="UtilityQueries.AllDbLinks">
                <columnAttribute name="owner"     displayName="owner" />
                <columnAttribute name="db_link"   displayName="db_link" />
                <columnAttribute name="username"  displayName="username" />
                <columnAttribute name="host"      displayName="host" />
                <columnAttribute name="created"   displayName="created" />
            </table>

            <table name="TuningTables" displayName="ApiDB Tuning Tables"
                   queryRef="UtilityQueries.TuningTables">
                <columnAttribute name="name"        displayName="Table" />
                <columnAttribute name="timestamp"   displayName="Last Update" />
            </table>

           <textAttribute name="apicommMacro" displayName="Links to Other Web Pages" 
                          inReportMaker="false">
             <text>
                  @USER_DBLINK@
             </text>
          </textAttribute>

        </recordClass>

    </recordClassSet>
   
    <recordClassSet name="UtilityAjaxClasses">
        
        <recordClass name="CurrentlyRunningSql" doNotTest="true" type="Ontology">
            <primaryKeyAttribute name="primary_key"
                                 displayName="SQL">
                <columnRef>source_id</columnRef>
                <columnRef>project_id</columnRef>
                <text>
                    <![CDATA[
                    $$project_id$$:$$source_id$$
                    ]]>
                </text>                
            </primaryKeyAttribute>
            <table name="CurrentlyRunningSql" displayName="Currently Running SQL"
                   queryRef="UtilityQueries.CurrentlyRunningSql">
              <columnAttribute name="source_id"        displayName="source_id" /> 
              <columnAttribute name="serial_no"        displayName="serial_no" />
              <columnAttribute name="osuser"           displayName="osuser" /> 
              <columnAttribute name="machine"          displayName="machine" />
              <columnAttribute name="username"         displayName="username" /> 
              <columnAttribute name="qTime"            displayName="qTime" /> 
              <columnAttribute name="last_active_time" displayName="last_active_time" /> 
              <columnAttribute name="sql_fulltext"     displayName="sql_fulltext" />
              <columnAttribute name="isSelf"           displayName="isSelf" />
            </table>
        </recordClass>
    </recordClassSet>

</wdkModel>
