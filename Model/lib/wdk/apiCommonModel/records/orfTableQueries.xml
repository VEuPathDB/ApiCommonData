<wdkModel>

  <querySet name="OrfTables" queryType="table">

      <defaultTestParamValues includeProjects="PlasmoDB">
         <paramValue name="source_id">PB_RP3804-2-1862-2092</paramValue>
         <paramValue name="project_id">PlasmoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="ToxoDB">
         <paramValue name="source_id">scf_1104442822256-1-1399492-1399677</paramValue>
         <paramValue name="project_id">ToxoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="CryptoDB">
         <paramValue name="source_id">AAEE01000015-4-52922-52668</paramValue>
         <paramValue name="project_id">CryptoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="GiardiaDB">
         <paramValue name="source_id">AACB02000007-2-49229-49390</paramValue>
         <paramValue name="project_id">GiardiaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="TrichDB">
         <paramValue name="source_id">DS164731-2-86-799</paramValue>
         <paramValue name="project_id">TrichDB</paramValue>
      </defaultTestParamValues>
     <!-- TODO source_id -->
      <defaultTestParamValues includeProjects="TriTrypDB">
         <paramValue name="source_id">Lbr.chr26-1-799135-799317</paramValue>
         <paramValue name="project_id">TriTrypDB</paramValue>
      </defaultTestParamValues>

     <sqlQuery name="Locations" isCacheable="false" includeProjects="PlasmoDB,ToxoDB,CryptoDB,TrichDB,GiardiaDB,TriTrypDB">
            <column name="source_id"/>
            <column name="project_id"/>
            <column name="sequence_source_id"/>
            <column name="is_top_level"/>
            <column name="start_min"/>
            <column name="end_max"/>
            <column name="is_reversed"/>
            <column name="start_context"/>
            <column name="end_context"/>
            <column name="feature_source_id"/>
            <sql>
            <![CDATA[
             SELECT  oa.source_id, '@PROJECT_ID@' AS project_id,
                     fl.feature_source_id,
                     fl.sequence_source_id,
                     case when project_id='ToxoDB' then (Decode(fl.is_top_level,0, 'Scaffold', 1, 'Chromosome'))
                          else (Decode(fl.is_top_level,0, 'Contig', 1, 'Scaffold'))
                          end as is_top_level,
                     fl.start_min,
                     fl.end_max,
                     Decode(fl.is_reversed, 0, '+', 1, '-') is_reversed,
                    (fl.start_min-5000)as start_context,
                    (fl.end_max+5000)as end_context
              FROM apidb.featurelocation fl, apidb.orfattributes oa 
              WHERE fl.feature_source_id = oa.source_id
              ORDER BY fl.is_top_level desc
            ]]>
            </sql>
        </sqlQuery>

      <sqlQuery name="AllResults" isCacheable="false" includeProjects="EuPathDB">
            <paramRef ref="recordParams.orf_answer"/>
            <column name="source_id"/>
            <column name="project_id"/>
            <sql>
                <![CDATA[
                    SELECT source_id, project_id
                    FROM $$orf_answer$$
                ]]>
            </sql>
        </sqlQuery>

       <sqlQuery name="ApiProjectOrfs" isCacheable="false" includeProjects="EuPathDB">
            <paramRef ref="recordParams.Project"/>
            <paramRef ref="recordParams.orf_answer"/>
            <column name="source_id"/>
            <column name="project_id"/>
            <sql>
                <![CDATA[
                    SELECT c.source_id, c.project_id
                    FROM $$orf_answer$$ c, apidb.orfattributes aa
                    where aa.source_id = c.source_id
                    and aa.project_id = $$Project$$
                ]]>
            </sql>
     </sqlQuery>

 </querySet>
</wdkModel>



