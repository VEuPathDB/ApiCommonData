<wdkModel>

  <querySet name="UniversalIds" queryType="id">

  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!--   -->
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <processQuery name="Blast" displayName="BLAST" 
             processName="org.apidb.apicomplexa.wsfplugin.wublast.WuBlastPlugin">

        <testParamValues includeProjects="CryptoDB">
            <paramValue name="BlastQuerySequence">AACCCTAATCATTCCAACTTTGTTTCCAATTCCA</paramValue>
        </testParamValues>
        <testParamValues includeProjects="ToxoDB">
            <paramValue name="BlastQuerySequence">GACCGAAGATGGGCTGTCCAACTTCGTGTCTACGATATCTCCAGAGGAATAGCCCGGCAAATGTCGCCGCTTCTTCTTGGGCGTCAGATCGATGGCATATGGCACACTGGCGTCGTTGTG</paramValue>
            <paramValue name="BlastDatabaseType">Genome</paramValue>
        </testParamValues>
        <testParamValues includeProjects="PlasmoDB">
            <paramValue name="BlastQuerySequence">GCAGGAAATATGATTCCAGATAATGATAAAAATTCAAATTATAAATATCCAGCTGTTTATGATGACAAAGATAAAAAGTGTCATATATTATATATTGCAGCTCAAGAAAATAATGGTCCT</paramValue>
            <paramValue name="BlastDatabaseOrganism">Plasmodium falciparum</paramValue>
        </testParamValues>
        <testParamValues includeProjects="GiardiaDB">
            <paramValue name="BlastQuerySequence">CTTAGAGACAAGTATGGCAGTATAGAAGGTCTAGCAAAAGAATTGGGGTCTGACCCTGCCACAGGCCTTTTGAAACCTACCGTTTTGCTCCATCGAAAAACCTATGGTAGCAATACAATG</paramValue>
            <paramValue name="BlastDatabaseOrganism">Giardia lamblia</paramValue>
        </testParamValues>
        <testParamValues includeProjects="TrichDB">
           <paramValue name="BlastQuerySequence">AAGACACTCGCTGAATTAAGAAAGCGCAAATTAGAGGGTGTTGTTCTCATCTACGGCTTCCCAGAGCCAACACGCGCCCACTGCGACTTCGAACCAGTCTTCCGCCAGGAATCCTGCTTC</paramValue>
        </testParamValues>
        <testParamValues includeProjects="TriTrypDB">
           <paramValue name="BlastQuerySequence">ATGCAACTCCAAAGGTTGGGTGCTCCACTACTTAAAAGGCTTGTGGGGGGATGCATACGC</paramValue>
           <paramValue name="BlastDatabaseOrganism">Trypanosoma brucei</paramValue>
        </testParamValues>

       <paramRef ref="sharedParams.BlastDatabaseType" quote="false" />
       <paramRef ref="sharedParams.BlastAlgorithm" quote="false" />
       <paramRef ref="genomicSimilarityParams.BlastDatabaseOrganism" quote="false" />
       <paramRef ref="sharedParams.BlastQuerySequence" quote="false" />
       <paramRef ref="sharedParams.-e" quote="false" />
       <paramRef ref="sharedParams.-v" quote="false" />
       <paramRef ref="sharedParams.-b" quote="false" />
       <paramRef ref="sharedParams.-filter" quote="false" />

       <wsColumn name="source_id" width="32" wsName="Identifier"/>
       <wsColumn name="project_id" width="32" wsName="ProjectId"/>
       <wsColumn name="TabularRow" width="3000"/>
       <wsColumn name="Alignment" width="4000"/>
       <wsColumn name="Header" width="3000"/>
       <wsColumn name="Footer" width="3000"/>
 <wsColumn name="Counter" width="30"/>
    </processQuery>
 
  </querySet>

  <querySet name="UserFiles" queryType="id">
      <sqlQuery name="Files" doNotTest="true"
             isCacheable="false">
        <column name="source_id"/>
        <column name="project_id"/>
        <column name="filename"/>
        <column name="title"/>
        <column name="notes"/>
        <column name="uploadtime"/>
        <column name="filesize"/>
        <column name="format"/>

        <column name="provider"/>
        <sql>
            <![CDATA[
            select userfileid as source_id, '@PROJECT_ID@' as project_id,
                   f.filename, f.title, f.notes, 
                   to_char(f.uploadtime,'YYYY-MM-DD HH24:MI:SS') uploadtime,
                   f.filesize, f.format,
                   u.first_name || ' ' || u.last_name || '<br>' ||
                   u.organization as provider
            from uploads.UserFile@USER_DBLINK@ f,
                 @USER_SCHEMA@users@USER_DBLINK@ u
            where f.owneruserid = u.signature (+)
              and projectname = '@PROJECT_ID@'
           ]]>
       </sql>

    </sqlQuery>
  </querySet>

</wdkModel>
